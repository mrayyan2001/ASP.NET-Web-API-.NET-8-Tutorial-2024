so API controllers are very similar to the doors on a house the doors on a house are there to facilitate people going in and out and they're usually the first thing that you notice they're usually the first thing that you walk up to when you're trying to enter a house if you're going to go into an API you're going to go through the controller I.E the API endpoint and API endpoints the way that you actually go through them is through your URLs now we have all different types of endpoints you could have endpoints to get many things you could get endpoints to get uh just one thing but one of the most important Concepts that a lot of people kind of gloss over is that you have this thing called a list and you have this thing called a detail and list and details are all in programming and in software in general think about it on your Facebook page that you very rarely go to it's usually starts out in the form of a list it starts out in the form of a feed and if you want to go to that person's profile you go to a detail page and API endpoints help us facilitate this we have an API endpoint that gets us list and we have an API endpoint that gets us details and that's what we're going to make as our first controllers right now okay so the first thing that we want to do is go into our API and we are going to create a new folder we're going to call it controllers after we get done doing that we are going to create what's called a stock controller and we are going to create these on a Model by model basis notice that the stock is the model and we're going to separate them so we'll actually have a comment controller as well too and that's done by Design in order to separate concerns so the first thing that we want to do it may be tempting to come up here and go ahead and put the attributes but I always put the uh controller base first if you add the controller base just like this it's way easier to actually bring in these uh attributes later if you bring in the attributes first it always messes up and it always mixes up the actual name spaces you could also put this a lot of people like to put the controller but I think it looks better to type it out because this part's always capitalized capitalized and it doesn't look as neat I think so I always just go ahead and spell out the stock next thing is we're going to go API controller and because you brought in the controller base first like a smart person just kidding it's going to automatically bring in all of this for you after this what you want to do is you want to create a con uh Constructor so press C and we're going to press tab it'll bring in a Constructor for you this is where things are going to get really fun because now we're actually going to bring in our database and the way that we bring in our datab base is we bring in our DB context now you could go ahead and type that whole entire thing out but I think it looks better just as context and we also need to bring it in up here to make it read only if you don't do this it's going to allow it to be mutable and you don't want something like this to be mutable even in this case I don't think there's really much damage that could be done if it wasn't mutable you could make this public but I think it makes things look a little bit better and it does provide just a little bit more security against people modifying things that aren't supposed to be modified which will probably help you in the long run if your app actually gets bigger okay so now what we're going to do is we are going to create our HTTP git now remember git is the same thing as read they call it a git but it's actually just a read when you're reading something all that you're doing is you're literally just getting it out of memory or in our case a database and reading it and you may be wondering well how are we going to get it out of a database we've already created our application DB context and we can quickly just go into here after we get done making our method and we're just going to go ahead and make code that's going to grab it from the database using what we just created now if this doesn't look like something that you just create if you don't think you created this you actually did so if we go into here you click stocks what if you didn't see that just control and click you can see it takes us to the app application DB context so you did indeed create this and remember that the application DB context is there just to get stuff out of the database so we're doing our job we're getting things out of the database but you may be asking yourself well why do we have to have this two list well this is called deferred execution when you just do this it's going to return a list like object but it's going to make SQL on the fly so technically this if you just do this right here this has not been executed in order for you to be able to create the SQL to go out to the database and get whatever you need you have to have the two list because of something called deferred execution so if you don't understand why we use the two list read up on deferred execution because it's really interesting and it will explain why exactly we did it if you didn't understand the way that I told you just then so the next thing that we're going to do is we're going to create an HT TP git that takes in a variable just like this so that we can get just one record at a time we're returning a list right now but we want our detail as well too remember we want we just created our list but we also want our detail page so what we're going to do is we're going to get it we're going to make an API endpoint that will only return one actual item we're going to have our I action result right here so we'll have I action result and an ey action result just means this an i action result is simply just a return method it's simply just called an action result and all an action result is is a fancy little wrapper so that whenever you return something from the API you don't have to go through all types of in-depth code just to tell the person that you're returning a 500 request or you're returning a 200 in this case ey action result is just a nice little wrapper that's going to handle all that for you and make it so that you don't have to type out all types of crazy code just to tell somebody that you're returning or that your actual API endpoint worked okay so now we have get by ID so when we're returning an individual thing when we're returning an individual stock when we're returning one individual just record from the database we actually have to tell them which one that we want it's not like a list where we're returning everything if you're going to return a detail you have to be specific and that's why we added this ID right here and the what what's going to happen is that this ID is going to be transferred down here into this parameter and net is going to take care of all this for you so net is going to use what's called Model binding to extract this string out turn it into an INT and then it's going to pass it right down into our actual code which I think is absolutely amazing so we'll have context we'll have stocks that we're going to find Now find is very similar to any type of searching algorithm a find is literally just a form of search that's going to find by the ID now I've read all on stack Overflow you could use first or default but supposedly find is the best if you're just using ID because it's going to search directly by the primary key okay so next thing do a little null check we're going to check and see if our stock is null so next thing that we're going to do is if we don't actually return something if we're finding one thing what we're going to have to do is we're actually going to have to check if it's null and if it's null we're going to return not found which again is a form of ey action result which is a fancy little wrapper that's going to provide us with the not found request so we don't have to type out like the status code and all types of crazy stuff just to tell somebody that's not found and then lastly if we found it we are going to return the stock and we will be able to see it within our API Okay so we've got our controller ready but there's a couple things that we need to do before we test this the first thing is that we need to add our controllers to the program.cs so if you go into here we're going to type in services. add controllers and we are good to go on that then what we need to do is right before the app. run so right here we need to type in add and then we need to say map controllers just like this if we don't do this Swagger will not work and you will get this weird error called it an https redirect error um it's very frustrating so make sure to go ahead and add those so the next thing that we need to do is we need to go ahead and fire up SQL Server management Studio we need to go within our database right here and we need to create some dummy data within our stock so go to our stocks um I've already populated it with a couple records but I'll show you how to go ahead and add records to it so if you go into here let's say you want to add I don't know we'll say vti you're an index fun guy we'll say Vanguard Total index and we'll say the purchase price is $200 I think it's way more than that now Pro maybe I don't know I haven't checked forever but uh dividend and we'll say Index Fund then we'll say a market cap of couple trillion dollar so next one we'll say paler so uh maybe you're a big paler fan go paler um purchase price I think it's like 20 bucks right now last dividend not paying a dividend industry technology say so technology and and the market cap just put in a fake market cap like this okay so last thing um this is the last thing I promise we're going to go net watch run so go ahead just restart your net uh restart your server really quickly then we'll go inside of swagger and the great thing about Swagger is that we have all different types of cool little ways to test our endpoints and it does everything for you pretty much so go ahead execute this you'll probably get sort of a long loading because it's actually going to have to hit the database um but nonetheless you should see all of your stocks right here so let's go ahead find one let's say We'll test Tesla out go ahead copy this um go ahead paste that into there make sure that it gets okay and then it only returns Tesla and let's also test a fake number really quickly and we get a knot found our controllers are working we can finally move on to the next part of our hope that you guys enjoyed this if you did make sure to smash that like button smash that subscribe button and as always thank you for watching