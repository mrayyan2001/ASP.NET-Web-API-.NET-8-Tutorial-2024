so the word update is very intuitive it works like this you are going to send up some type of data and the whole goal is to update an existing record but an update is very different from a create and a couple ways and the first way is that you're going to have to send up the ID you are going to have to be able to identify that existing record sometimes most of the time it's by the ID but key point you are going to have to know the existing record because it kind of makes sense how are you going to update something that you don't even know if it exist so key Point remember that you're going to have to have the ID most likely or some type of other identifying Factor also when you send up an object it's going to update the whole entire thing this is very different from a patch which will only update one or two things remember that if you have null here if you send up null it's going to change the purchase to null or if you have a one here it's going to change the or if you have more appropriately if you have a zero here it is going to change the purchase price to null regardless of whether you expected it to or not if you don't put anything in there it's going to put nothing in there so it's very exact and it's very different from a patch but there's also other ways that the update is incredibly different with a create we just toss it in an ad method we good to go but an update is a little bit more complex because first and foremost you're going to have to do a search you're going to have to do a first or default or use some type of searching algorithm to find that existing value so remember this is the existing value search that must happen if you don't search for the existing value you're not going to be able to find the record and it kind of makes sense that way and it's built that way by Design and I spelled search wrong so existing search value also once you actually get the value that you found through the database the next thing that you are going to do is you are going to edit that object which seems kind of strange and it even gets Stranger Than This because in the background Entity framework is Now tracking this it is tracking the updates that you made so let's just say in our Microsoft example we want to change it from Microsoft to Microsoft software LLC and we just dot into to the company name and make the change directly on the object and then when we run save changes boom that's when the SQL is sent to the database and we now have the actual update but remember just like the create there is tracking going on in the background and just by editing the actual object isn't going to cut it you have to run save changes if you want those updates if you want that SQL to be generated and sent to the server so let's go ahead let's hop inside vs code code and let's skip coding so inside of vs code we are in our stock controller file let's go ahead into here and let's go make a put and very similar to the HTTP post we are going to have annotations that are going to be above but one thing that we are going to have to make sure that we do just as I talked about in on the Whiteboard we're going to have to specify our ID if you want to update you're going to have to have an ID D preferably or some type of identifier hopefully that is that's like the third time I'm sorry if I'm getting very repetitive next thing we're going to go inside of ey action result so we're going to say I action result we're going to do an update and we're going to go from Route so just remember from route from body is we're going to put the Json in the body that's how we are going to identify but we can also have a from R we can have our ID and and we can have a from body so we get the best of both worlds and look at how this correlates with our whiteboard we have our ID then we have our from body we have both of them and the ID is being sent through the URL as opposed to the create where you don't want to send anything just remember that the create most of the time you're not going to send anything because it's new it does not have an ID next thing that we're going to do is we need to make a dto for this each dto each type of request dto is going to be different and I would highly highly suggest just biting the bullet and go ahead and creating new dto for each separate endpoint because these change so much and so often that you definitely do not want to have the same dto or the stock dto for all of them so let's just go ahead in here I know it's not fun but let's go ahead and create an update so we're going to go update stock request dto and the great thing about this is that we already have this right here so we're pretty much good to go and we can just copy that toss it in here and we don't have to hand type all that stuff out like we did before or just copy it over and have to delete a bunch of stuff okay so we're good to go on that now what we want to do is remember we are going to have to use a searching algorithm in order to find the first stock to number one check it if it it exists and if it does exist we need to modify the actual object so that net or Entity framework can actually track it tracking is actually a very important thing especially for the update because it needs to be able to track the changes that you made and that doesn't make sense hold on just a second let's do a uh null check really quick so if this is null remember if it if it does not exist we definitely do not want to continue and we don't want to do any further action and we want to just go ahead and return not found just like that very simple then we're going to go down here this is where things are going to get kind of a little crazy and you probably have seen either something similar to this but this is where the actual updates are happening keep in mind that we went retrieve we went and retriev this and when this actually occurs Entity framework is going to start tracking it and when it tracks it it's going to keep track of any updates that you make as well too so what we want to do is we want to modify this thing straight on the actual object we could abstract this away actually we might abstract this away when we uh start talking about repositories but for right now let's just go ahead and do the alterations do the update straight in the actual uh object so we'll go company name we'll do the same thing so we'll go stock model and we'll have the purchase and we'll go update dto so update dto go purchase and stock model kind of repetitive but just kind of got to do it you got update tto last div stock model stock stock model we go stock model and we go industry you got update dto so update dto we go the industry then lastly we want the market cap so we go stock model. industry and let's see here market cap and we do update dto then we're going to do market cap and all that it this is doing is taking this what we got out of the the actual database and taking what we have up here what you actually submitted to the API modifying it then we do the magic thing that I talked about we're going to do the save changes and this is what's actually going to send it to the database and then we return the okay we return our action result and we can return our stock model so we go stock model and then we change it to a two stock dto so then we just change it back to the two stock dto and we don't have to create another mapper for this and that should be it so let's go ahead here I'm going to go ahead restart do do a hard restart of the server we'll go back here so let's find our string we created kind of a crazy looking stock that didn't really even make sense we created this string here so let's go ahead and let's make this a real stock we don't want this string string string z0000 messing up our all our beautiful data in here so we'll go string and we'll say Amazon we'll give Amazon a place in our API so go Amazon we'll say the purchase price I think Amazon's like three $340 maybe I don't really know I haven't bought Amazon in like a really long time I don't pay attention the last dividend will say two I think no actually I don't think they have a dividend they have zero so say industry technology and market cap couple trillion all right so Moment of Truth and looking good but we need to make sure that it actually updated it in the actual database and everything is updated we are good to go our update API and point is all set anyways hope that you guys enjoyed this if you did make sure to smash that like button smash that subscribe button and as always thank you for watching