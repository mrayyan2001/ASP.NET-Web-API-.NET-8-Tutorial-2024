so the whole entire reason behind this onetoone relationship is so that when a user creates their comment we can see their name it's really funny when people leave troll comments and have really crazy names the whole entire reason we're doing this is because of fun we want to see who's doing these juicy trolls and the great thing is is that we already have our comment infrastructure built out adding the user to our comment model model is going to be a very simple process and very powerful as well too during the create Pro during the create comment process that we've already built before the comment is actually saved before it's actually created we're going to be sneaky and we're going to go get our user and we're going to plug our user into the comment model before it saves it's almost like a little trick of hand before that comment goes into the database to save we're quickly just just going to go get our user plug it into the comment model save it with the user and we will be able to see this comment model or we will be able to see this user in all of its Glory so let's go ahead let's hop on over and let's code it up so the first thing that I'm going to do is I'm going to go within my comment controller and we're going to bring in the user manager because we need the user I'm going to go private read only user manager is equal to or has a type of app user within the generic go into here I'm going to bring this down and then I'm going to do the same thing so user manager app user is equal to uh user manager then I'm going to add an underscore before this then of course I'm going to bring it down within my Constructor going to say user manager now what we need to do is we need to go to the create and check if stock exists that's fine we can go ahead and leave that or just going to go down into here we're going to go get our username and we're going to reach within our claims extension we're going to get the username then after that we're going to uh go get our user from the database so I'm going to say B.A user is equal to await user manager user manager. find username or find by name then we'll go ahead pass in that username looking good so after we we've gotten the user this is where the part this is where we're going to be sneaky snakes so we've already built our comment dto now what we need to do is just go ahead within our comment model and pass in our app user ID because this is an object we can modify it and then we can just place our user that our app user ID that we got back and I think that that is very cool so this is pretty much good to go now we have to go within our repositories and add includes because this isn't going to be shown if we don't add includes because of something called deferred execution so we're going to go within our comment repository if I can find it and I'm going to add includes to the get all async and the get by ID async because we want both of those end points to have it so for the get all async just go within uh comments we're going to go include and go ahead we're going to say c is equal to C do or a I should put a there don't put a c app user so we're go ahead include the app user go ahead you can copy and paste this or you could type it if you want to then I'm going to just go down here I'm going to do uh the same exact thing for the get ID and find async does not have the method if you have an include on it so we're going to have to do a first or default and I'm going to say let's see C here is equal to C uh c.id so say c.id is equal to ID and that looks good so here's kind of an even trickier one and this one's pretty sweet so our stock repository we want to returns uh comments to for our stocks but here's where things get tricky so in this repository our app user is going to be double nested we are going to have a stock we are going to have comments and then within the comments is where we're going to have app users and this is our stock endpoint this is very different from our comment endpoint so how do we get it so that it will show this nested user relationship this is where we have to then include which is another link query that's going to make sure that we in also include any other nested objects as well too so here's what we're going to do we're going to go within our stock repository so I'm within the stock repository we're going to go to our get all async and right after this include then we're going to do a then include and this then include is going to include our app user looking good so now we've gotten the actual creation we've gotten the response but our response is going to return everything so we want to go within our comment dto here if I can find it so I'm going to find my comment dto and we're going to add the created bot and you could actually do whatever you want to you could call this whatever you want but I'm going to go into here U I'm going to say string and I'm going to say created by going to have a get set and I'm also going to add a string.empty so we don't get any null reference errors then we need to go inside the comment mapper and we need to change it so that we actually get the data that we want back so I'm going to find my comment mapper and I'm going to go to to comment dto I'm going to say created by comment model appuser dot let me see here username I think it's username and we should be good to go so also one last thing I almost forgot about this we need to go within our stock controller and this is actually like a pretty crazy err that I just figured out that was happening the other day we need to pass in stock dto into the get all right here because it was returning this and it should be returning this and also just for good time sake I'm going to do a two little two list just to be sure I think it still actually returns it but going to go ahead and add that extra two list so we can be that extra little bit official so go ahead do a cold restart and we're going to test this okay so I'm inside of swagger I have logged in the lock has officially locked up so I have my my token within Swagger then I'm going to go down to my stock and I'm going to pick out a stock that I want to um add a comment to so I've already added a comment to this one just for spoilers but let's do palent here so go ahead grab the ID of two then go up to your comment and so we want to add two and I'm going to just give it a title of paler good I put all my money in palen tier exclamation mark so let's go ahead let's execute it looks like it went through and it's in the shape that we want it as well too so let's go ahead let's go back down to our stock and let's make sure that we've got it the way that we want yes we have comments the data looks great it is in the shape that we want it has our created by it has our username we are good to go anyways on to the next video hope that you guys enjoyed this if you did Smash that like button smash that subscribe button and as always thank you for watching